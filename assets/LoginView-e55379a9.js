import{_ as c,f as d,o as u,c as m,b as e,w as a,v as l,k as p,n as h,t as f}from"./index-f86386bb.js";const g={name:"LoginView",data(){return{user:{username:"",password:""},message:"",isSuccess:!1,isBtnDisabled:!1}},methods:{async login(){try{const{data:i}=await d.post("https://vue3-course-api.hexschool.io/v2/admin/signin",this.user);if(console.log(i),i.success){const{token:s,expired:r}=i;document.cookie=`hexToken=${s}; expires=${new Date(r)}; path=/`,this.message="登入成功",this.isBtnDisabled=!0,this.isSuccess=!0,await this.$router.push({name:"AdminProducts"})}else this.message="登入失敗，請確認帳號密碼"}catch(i){i&&(this.message="登入失敗，請確認帳號密碼")}}}},_={class:"d-flex align-items-center h-100"},b={class:"w-25 mx-auto"},w={class:"form-group mb-3"},x=e("label",{for:"username"},"帳號",-1),y={class:"form-group mb-3"},v=e("label",{for:"password"},"密碼",-1),k={class:"text-center"},B=["disabled"];function D(i,s,r,V,t,n){return u(),m("div",_,[e("form",b,[e("div",w,[x,a(e("input",{type:"text",class:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"請輸入帳號","onUpdate:modelValue":s[0]||(s[0]=o=>t.user.username=o)},null,512),[[l,t.user.username]])]),e("div",y,[v,a(e("input",{type:"password",class:"form-control",id:"password",onKeydown:s[1]||(s[1]=p((...o)=>n.login&&n.login(...o),["enter"])),placeholder:"請輸入密碼","onUpdate:modelValue":s[2]||(s[2]=o=>t.user.password=o)},null,544),[[l,t.user.password]])]),e("span",{class:h(t.isSuccess?"text-success":"text-danger")},f(t.message),3),e("div",k,[e("button",{type:"button",class:"btn btn-primary",onClick:s[3]||(s[3]=(...o)=>n.login&&n.login(...o)),disabled:t.isBtnDisabled}," 登入 ",8,B)])])])}const C=c(g,[["render",D]]);export{C as default};
